import{_ as l,c as o,o as t,a0 as i}from"./chunks/framework.C1J0Vcxi.js";const n=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"周报-Oveln/2025-10-28: 日志系统重构.md","filePath":"周报-Oveln/2025-10-28: 日志系统重构.md"}'),r={name:"周报-Oveln/2025-10-28: 日志系统重构.md"};function d(c,e,s,a,_,u){return t(),o("div",null,[...e[0]||(e[0]=[i(`<h2 id="引入了全面的日志系统-将之前零散的-defmt-使用方式重构为统一、可配置的日志框架。" tabindex="-1">引入了全面的日志系统，将之前零散的 defmt 使用方式重构为统一、可配置的日志框架。 <a class="header-anchor" href="#引入了全面的日志系统-将之前零散的-defmt-使用方式重构为统一、可配置的日志框架。" aria-label="Permalink to &quot;引入了全面的日志系统，将之前零散的 defmt 使用方式重构为统一、可配置的日志框架。&quot;">​</a></h2><h2 id="title-日志系统重构-date-2025-10-28" tabindex="-1">title: &quot;日志系统重构&quot; date: &quot;2025-10-28&quot; <a class="header-anchor" href="#title-日志系统重构-date-2025-10-28" aria-label="Permalink to &quot;title: &quot;日志系统重构&quot;
date: &quot;2025-10-28&quot;&quot;">​</a></h2><p><a href="https://github.com/Oveln/embassy_preempt/commit/7e0b37e07a7c0443b960fc7615f2192d9de9d987" target="_blank" rel="noreferrer">commit</a></p><ol><li><p><strong>新增日志模块</strong> (<code>src/log.rs</code>)</p><ul><li>创建了集中的日志模块，以及带有功能标志控制的日志宏</li><li>实现条件编译：当日志被禁用时，宏为空操作</li><li>添加了组件特定的日志宏，可以通过feature来启用和禁用： <ul><li><code>os_log</code> - OS 级别操作</li><li><code>task_log</code> - 任务管理操作</li><li><code>scheduler_log</code> - 调度器操作</li><li><code>timer_log</code> - 定时器操作</li><li><code>mem_log</code> - 内存管理操作</li></ul></li></ul></li><li><p><strong>功能标志</strong></p><ul><li>新的功能标志： <ul><li><code>logs</code> - 启用所有日志功能</li><li><code>log-base</code> - 基础日志功能 (defmt, panic-probe, defmt-rtt)</li><li><code>log-os</code> - OS 特定日志</li><li><code>log-task</code> - 任务特定日志</li><li><code>log-mem</code> - 内存特定日志</li><li><code>log-timer</code> - 定时器特定日志</li><li><code>log-scheduler</code> - 调度器特定日志</li></ul></li></ul></li><li><p><strong>build.rs更改</strong></p><ul><li>更新 build.rs 以检测和处理新的日志功能标志</li><li>使用条件编译根据启用的功能包含或排除日志</li></ul></li><li><p><strong>代码库重构（工作量极大）</strong></p><ul><li>将所有直接 defmt 使用替换为新的日志宏，之前所有的条件编译不需要了</li><li>在整个代码库中使用组件特定的宏： <ul><li><code>task_log</code> 在任务管理代码中 (os_task.rs, executor/mod.rs, 各种二进制文件)</li><li><code>timer_log</code> 在定时器相关代码中 (timer_queue.rs, os_time/*.rs, time_driver/mod.rs)</li><li><code>os_log</code> 在 OS 核心操作中 (os_core.rs, bottom_driver/mod.rs, os_cpu.rs)</li><li><code>scheduler_log</code> 在调度器操作中 (executor/mod.rs, os_cpu.rs)</li><li><code>mem_log</code> 在内存分配代码中 (arena.rs, stack_allocator.rs)</li></ul></li></ul></li><li><p><strong>测试文件优化</strong></p><ul><li>一些测试文件的函数使用宏生成</li></ul></li></ol>`,4)])])}const g=l(r,[["render",d]]);export{n as __pageData,g as default};
