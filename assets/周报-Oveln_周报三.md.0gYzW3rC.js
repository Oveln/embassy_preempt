import{_ as l,c as e,o as t,a0 as i}from"./chunks/framework.C1J0Vcxi.js";const c=JSON.parse('{"title":"第三周：平台支持层抽象、自动化集成测试","description":"","frontmatter":{"title":"第三周：平台支持层抽象、自动化集成测试","date":"2025-11-14"},"headers":[],"relativePath":"周报-Oveln/周报三.md","filePath":"周报-Oveln/周报三.md"}'),r={name:"周报-Oveln/周报三.md"};function o(s,a,h,n,d,m){return t(),e("div",null,[...a[0]||(a[0]=[i('<h3 id="🔧-平台抽象层重构" tabindex="-1">🔧 平台抽象层重构 <a class="header-anchor" href="#🔧-平台抽象层重构" aria-label="Permalink to &quot;🔧 平台抽象层重构&quot;">​</a></h3><ul><li>创建了 embassy-preempt-platform 模块，定义了统一的 Platform trait 接口</li><li>将所有硬件相关的代码从 executor 模块迁移到 platform 模块</li><li>实现了 STM32F401RE 平台的具体支持</li><li>为未来支持 RISC-V 做好了准备</li><li>将PendSV的平台依赖代码块和业务逻辑代码块区分</li><li>提供了完善的platform trait文档 见<a href="https://github.com/Oveln/embassy_preempt/blob/main/modules/embassy-preempt-platform/src/traits/platform.rs" target="_blank" rel="noreferrer">代码</a></li></ul><h3 id="依赖关系优化" tabindex="-1">依赖关系优化 <a class="header-anchor" href="#依赖关系优化" aria-label="Permalink to &quot;依赖关系优化&quot;">​</a></h3><ul><li>模块间依赖关系重组 优化前： <img width="2519" height="1153" alt="图片" src="https://github.com/user-attachments/assets/a11e48c2-8cf0-4708-8d7c-96f65d8d952a"> 优化后： <img width="1757" height="949" alt="图片" src="https://github.com/user-attachments/assets/6c57dd63-a471-4f8d-b58d-ceaaf7b44190"> 可以发现，平台相关的 cortex-m 库仅有platform平台支持库和driver驱动库依赖，这是良好的。</li></ul><h3 id="🧪-自动化集成测试框架搭建" tabindex="-1">🧪 自动化集成测试框架搭建 <a class="header-anchor" href="#🧪-自动化集成测试框架搭建" aria-label="Permalink to &quot;🧪 自动化集成测试框架搭建&quot;">​</a></h3><ul><li>在 example/tests/ 目录下创建了完整的测试套件</li><li>实现了优先级调度测试、任务创建测试的集成测试</li><li>添加了自动化测试配置</li></ul><h3 id="🐛-修复结构体对齐-bug" tabindex="-1">🐛 修复结构体对齐 Bug <a class="header-anchor" href="#🐛-修复结构体对齐-bug" aria-label="Permalink to &quot;🐛 修复结构体对齐 Bug&quot;">​</a></h3><ul><li>修复了 OS_TASK_STORAGE 结构体的内存布局问题 <ul><li>仅在 opt-level=0 时产生，非常神秘</li></ul></li><li>添加 #[repr(C)] 属性确保 C 结构体布局兼容性</li><li>增加了运行时地址验证机制</li><li>改进了相关的日志输出和调试信息</li></ul><h3 id="📝-其他改进" tabindex="-1">📝 其他改进 <a class="header-anchor" href="#📝-其他改进" aria-label="Permalink to &quot;📝 其他改进&quot;">​</a></h3><ul><li>删除了原仓库中不需要的文件和依赖</li><li>将 app 模块重命名为 driver 模块</li><li>提取了独立的 mem 模块</li><li>添加了 shutdown 函数实现（用于测试）</li><li>优化了程序栈大小配置（暂时将程序栈设置为4Kb，防止爆栈。后续迁移至cfg中）</li><li>为各个模块添加了 README 文档</li></ul><h3 id="📊-工作成果统计" tabindex="-1">📊 工作成果统计 <a class="header-anchor" href="#📊-工作成果统计" aria-label="Permalink to &quot;📊 工作成果统计&quot;">​</a></h3><ul><li>提交数量: 20 个 commits</li><li>文件变更: 133 个文件</li><li>代码增删: +3,371 / -34,160 行</li></ul>',12)])])}const p=l(r,[["render",o]]);export{c as __pageData,p as default};
