import{_ as e,c as l,o as t,a0 as r}from"./chunks/framework.C1J0Vcxi.js";const c=JSON.parse('{"title":"第二周：模块化重构，多平台抽象初步","description":"","frontmatter":{"title":"第二周：模块化重构，多平台抽象初步","date":"2025-11-07"},"headers":[],"relativePath":"周报-Oveln/周报二.md","filePath":"周报-Oveln/周报二.md"}'),i={name:"周报-Oveln/周报二.md"};function o(s,a,n,h,m,p){return t(),l("div",null,[...a[0]||(a[0]=[r('<h1 id="架构重构与模块化" tabindex="-1">架构重构与模块化 <a class="header-anchor" href="#架构重构与模块化" aria-label="Permalink to &quot;架构重构与模块化&quot;">​</a></h1><p>核心工作： 重构为模块化架构，提升代码可维护性和可扩展性</p><h2 id="模块拆分" tabindex="-1">模块拆分 <a class="header-anchor" href="#模块拆分" aria-label="Permalink to &quot;模块拆分&quot;">​</a></h2><ul><li>✅ embassy-preempt-executor - 执行器核心模块</li><li>✅ embassy-preempt-port - 平台接口抽象层（暂时）</li><li>✅ embassy-preempt-cfg - 配置管理模块（暂时）</li><li>✅ embassy-preempt-event - 事件同步机制</li><li>✅ embassy-preempt-app - 应用层封装（暂时）</li><li>✅ embassy-preempt-structs - 基础数据结构</li><li>✅ embassy-preempt-log - 独立日志系统</li></ul><h2 id="rust版本升级" tabindex="-1">rust版本升级 <a class="header-anchor" href="#rust版本升级" aria-label="Permalink to &quot;rust版本升级&quot;">​</a></h2><ul><li>✅ 所有模块迁移至2024版本</li><li>✅ 依赖包版本同步更新</li></ul><h2 id="构建系统优化" tabindex="-1">构建系统优化 <a class="header-anchor" href="#构建系统优化" aria-label="Permalink to &quot;构建系统优化&quot;">​</a></h2><ul><li>✅ 重新设计 Cargo.toml 配置结构</li><li>✅ 优化工具链和构建脚本</li><li>✅ 改进memory.x</li></ul><h2 id="🏗️-平台抽象层" tabindex="-1">🏗️ 平台抽象层 <a class="header-anchor" href="#🏗️-平台抽象层" aria-label="Permalink to &quot;🏗️ 平台抽象层&quot;">​</a></h2><h3 id="平台无关化改造" tabindex="-1">平台无关化改造 <a class="header-anchor" href="#平台无关化改造" aria-label="Permalink to &quot;平台无关化改造&quot;">​</a></h3><ul><li>✅ 新增 <a href="https://github.com/Oveln/embassy_preempt/blob/main/platform/src/platform.rs" target="_blank" rel="noreferrer">platform</a> 抽象模块</li><li>✅ STM32F401RE 平台支持完善</li><li>✅ 多平台移植基础架构</li></ul><h3 id="依赖关系优化" tabindex="-1">依赖关系优化 <a class="header-anchor" href="#依赖关系优化" aria-label="Permalink to &quot;依赖关系优化&quot;">​</a></h3><ul><li>✅ 模块间依赖关系重组</li><li>✅ 导入路径标准化</li><li>✅ 架构层次清晰化</li></ul><h1 id="工作成果统计" tabindex="-1">工作成果统计 <a class="header-anchor" href="#工作成果统计" aria-label="Permalink to &quot;工作成果统计&quot;">​</a></h1><ul><li>提交数量： 25 个 commits</li><li>文件变更： 114 个文件</li><li>代码增删： +1829 / -1613 行</li><li>新增模块： 7 个独立 crate</li></ul><h2 id="当前状态" tabindex="-1">当前状态 <a class="header-anchor" href="#当前状态" aria-label="Permalink to &quot;当前状态&quot;">​</a></h2><p>拆分模块后仅有 embassy-preempt-{executor,app} 的部分代码依赖平台特定实现，且原仓库的 button 驱动设计很难与 executor 解耦，所以暂时禁用了</p><h2 id="当前计划" tabindex="-1">当前计划 <a class="header-anchor" href="#当前计划" aria-label="Permalink to &quot;当前计划&quot;">​</a></h2><ul><li>给现有代码完善注释文档，做到二次开发也能非常容易</li><li>设计新的设备驱动模型，理想状态下能支持包含单但不限于 button 的驱动设计</li><li>对拆分后较为凌乱的若干crate继续整理，对crate间的交互进一步规范化，尽量解耦</li><li>整合embassy-preempt-{app,port,cfg}模块，整合进<a href="https://github.com/Oveln/embassy_preempt/blob/main/platform" target="_blank" rel="noreferrer">platform crate</a><ul><li>预计状态：支持另一平台仅需实现一个CPUops trait，并且可以通过platform中定义的Driver trait给该平台实现外设驱动，供用户使用</li></ul></li><li>实现跨平台的entry宏：当前的程序入口宏依赖 cortex-rt::entry，可以写一个新的embassy_preempt::entry宏，在该层进行多平台处理</li></ul>',19)])])}const b=e(i,[["render",o]]);export{c as __pageData,b as default};
