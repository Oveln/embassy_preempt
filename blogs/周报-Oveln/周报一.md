---
title: "第一周：源码阅读；Makefile整理；日志系统搭建；工具链搭建"
date: "2025-10-31"
---

# 第一周工作总结

## 📚 文档整理与学习
- 阅读项目源码及开发板手册，整理总结相关技术文档
- 文档截图展示：
  
  <img width="543" height="436" alt="技术文档1" src="https://github.com/user-attachments/assets/d72dc16b-4943-4247-88d6-e7c9e87f9bee" />
  <img width="680" height="669" alt="技术文档2" src="https://github.com/user-attachments/assets/edda841b-7cda-4f34-a01d-0775b56fd32d" />

## 🔧 Makefile 优化
- 初期对 Rust 嵌入式工具链不熟悉，调整 Makefile 使用 OpenOCD + GDB 方案
- 后续根据建议，迁移至 probe-rs 工具链

## 📝 日志系统搭建
构建了高可用性的日志系统，具备以下特点：
- **可扩展性强**：新增日志模块只需添加宏定义和 features
- **伸缩性好**：便于后续功能扩展

🔗 [详细设计方案](https://github.com/Oveln/embassy_preempt/discussions/2)

## 💡 Rust 在 CH32V208 上的实践
基于 ch32-metapac 和 qingke-rt，成功实现 CH32V208 的 Blinky 程序：

### 实现功能
- ✅ RTT 调试输出
- ✅ 自定义 Delay 功能（因 QingkeV4 内核未实现 mcycle 寄存器）
- ✅ VSCode GUI 界面逐行调试支持

🔗 [代码仓库](https://github.com/Oveln/ch32v208-blinky-rust)

## 🛠️ 工具链开发
为支持 RISC-V 平台扩展，开发了相关烧录工具：

### 主要贡献
- 编写 CH32V20x 系列芯片烧录算法
- 使 probe-rs 支持该系列的烧录、调试和擦除功能

### 相关 PR
- 🔗 [probe-rs PR #3616](https://github.com/probe-rs/probe-rs/pull/3616)
- 🔗 [ch32-rs PR #2](https://github.com/ch32-rs/flash-algorithms/pull/2)

🔗 [烧录算法仓库](https://github.com/Oveln/flash-algorithms/tree/main/ch32v208)

---

# 🎯 当前计划

## 平台架构抽象
- 将平台架构层抽象为独立的 `platform` crate
- 迁移现有 STM32F403RET 相关代码至 platform crate